# 4.1 Apply for a fiat currency withdrawal
**Description：** 

- Apply for a fiat currency withdrawal

**Request URL：** 
- `/api/recharge/customer/withdrawal `

**Request method：**
- POST

**Parameters (body)：** 

|parameter name|required|type|Description|
|:----    |:---|:----- |-----   |
|merchantNo |yes|string | Merchant's Merchant ID (UID)  |
|merchantOrderNo |yes|string | Merchant’s order number (generated by the merchant, unique for each merchant)  |
|withdrawType |yes|int | Withdrawal type 1 Fixed fiat currency  2 Fixed USDT    |
|fiatCurrency |yes|string |fiat currency Such as:"CNY"  |
|amount|no|Double|fiat currency amount （Must pass when withdrawType=1）|
|currencyCount|no|Double|USDT count （Must pass when withdrawType=2）|
|customerId|no|string|User ID The query condition used to query the history|
|accountName|yes|string|Bank account name|
|bankNumber|no|string|Bank card number|
|account|no|string|Bank Account|
|bankName|yes|string|Bank name|
|subbranch|no|string|Branch name|
|iBank|no|string|IBANK|
|bankAddress|no|string|Bank address|
|swiftCode|no|string|Swift Code|
|bankCode|no|string|Bank Code|
|remarks|no|string|remarks|
|type|no|int|Type 1 Normal 2 Urgent (default normal)|
|timestamp |yes|string | 10-bit timestamp  |

- Parameter encryption order： timestamp
- The timestamp parameter is used as form data to be spelled after the request, and other parameters are transmitted in post json format
- Note: The above optional parameters are selected according to the type of legal currency to be withdrawn
- Currently supported withdrawal legal currency: CNY, VND, THB, USD
 **Return parameter description** 

```
{
    "code":200,
    "data":{
        "account":"345345245",
        "accountName":"测试",
        "amount":null,
        "bankAddress":"",
        "bankCode":"",
        "bankName":"中国银行",
        "bankNumber":"535224124242",
        "comeFrom":2,
        "createTime":null,
        "currencyCount":500,
        "currencyTypeId":null,
        "customerId":"110",
        "fee":null,
        "fiatCurrency":"CNY",
        "financialReviewTime":null,
        "iBank":"344244",
        "id":null,
        "investorPassword":null,
        "merchantNo":"9357",
        "merchantOrderNo":"TEST1618221736",
        "orderNo":null,
        "refuseReason":null,
        "remarks":"",
        "state":null,
        "subbranch":"北京西二旗分行",
        "swiftCode":"",
        "traderId":null,
        "traderReviewTime":null,
        "type":1,
        "userId":null,
        "withdrawType":2,
        "withdrawalRate":null
    },
    "message":"success"
}
```
 **Request example** 
```
curl -X POST -H "content-type:application/json" -H "access_key:3A1CDB61128A3E693F0F3D7884F226E82E253650" -H "app_id:41043343" -d '{"bankNumber":"535224124242","bankCode":"","amount":1000.0,"iBank":"344244","accountName":"测试","swiftCode":"","bankName":"中国银行","type":"1","bankAddress":"","fiatCurrency":"CNY","customerId":"110","subbranch":"北京西二旗分行","account":"345345245","remarks":"","merchantNo":"9357"}' http://merchant-api.bitake.io/api/recharge/customer/withdrawal?timestamp=1609747081
```
# 4.2 Withdrawal history
**Description：** 

- Withdrawal history

**Request URL：** 
- `/api/recharge/customer/withdrawal/history `

**Request method：**
- GET

**Parameters (body)：** 

|parameter name|required|type|Description|
|:----    |:---|:----- |-----   |
|merchantNo |yes|string | Merchant's Merchant ID (UID)  |
|currPage|yes|int|current page|
|pageSize|yes|int|page Size|
|merchantOrderNo |no|string | Merchant order number  |
|customerId|no|string|customerId|
|fiatCurrency|no|string|fiat Currency|
|accountName|no|string|Bank account name|
|state|no|int|state： 0 Unreviewed  1 Reviewed succeed 2 succeed  -1 Reviewed failed  -2 failed|
|type|no|int|Type 1 Normal 2 Urgent|
|startTime|no|date|start time|
|endTime|no|date|done time|
|timestamp |yes|string | 10-bit timestamp  |

- Parameter encryption order： merchantNo&timestamp

 **Return parameter description** 

```
{
    "total":1,
    "code":200,
    "data":[{
        "account":"345345245",  //Bank Account
        "accountName":"测试",   //Bank account name
        "amount":1000.0,    //fiat currency amount 
        "bankAddress":"",  //bank address
        "bankCode":"",   //bank code
        "bankName":"中国银行",  //bank name
        "bankNumber":"535224124242", //Bank card number
        "comeFrom":2, 
        "createTime":"2021-01-03 11:25:39", //sumbit time
        "currencyCount":null, //usdt count
        "currencyTypeId":1, //1:USDT,2:BTC,3:ETH
        "customerId":"110", //customerId
        "fee":null, //fee
        "fiatCurrency":"CNY", //fiatCurrency
        "financialReviewTime":null, //financialReviewTime
        "iBank":"344244", 
        "id":5, 
        "investorPassword":null,
        "merchantNo":null,
        "merchantOrderNo":"TEST1618221736", //Merchant order number
        "orderNo":"WF1609644339630",  //order no
        "refuseReason":null, //refuseReason
        "remarks":"", //remarks
        "state":0, //state： 0 Unreviewed  1 Reviewed succeed 2 succeed  -1 Reviewed failed  -2 failed 
        "subbranch":"北京西二旗分行", //subbranch
        "swiftCode":"", 
        "traderId":null, 
        "traderReviewTime":null, //done time
        "type":1, //Type 1 Normal 2 Urgent
        "userId":490,
        "withdrawType":2, //Withdrawal type 1 Fixed fiat currency  2 Fixed USDT
        "withdrawalRate":null //withdrawal Rate
    }],
    "pageSize":20,
    "message":"success",
    "currentPage":1}
    
```

# 4.3 删除未审核的出金记录
**Description：** 

-Delete unreviewed withdrawal records (only application records with state=0 can be deleted)

**Request URL：** 
- `/api/recharge/customer/withdrawal/delete `

**Request method：**
- GET

**Parameters (body)：** 

|parameter name|required|type|Description|
|:----    |:---|:----- |-----   |
|merchantNo |yes|string | Merchant's Merchant ID (UID)  |
|merchantOrderNo |yes|string |Merchant order number  |
|timestamp |yes|string | 10-bit timestamp  |

- Parameter encryption order： merchantNo&timestamp

 **Return parameter description** 

```
{
    "code":200,
    "message":"success"
}

```

# 4.4 Query the gold exchange rate (valuation)
**Description：**

- Query the gold exchange rate (valuation)

**Request URL：**
- `/api/recharge/customer/withdrawal/rate `

**Request method：**
- GET

**Parameters (body)：**

|parameter name|required|type|Description|
|:----    |:---|:----- |-----   |
|fiatCurrency |yes|string | fiat Currency  |
|timestamp |yes|string | 10-bit timestamp  |

- Parameter encryption order： fiatCurrency&timestamp

**Return parameter description**

```
{
    "code":200,
    "data":{
        "fiatCurrency":"CNY",  //fiat Currency
        "withdrawalRate":6.69  //withdrawal Rate
    },
    "message":"success"
}


```

# 4.5 Query the withdrawal order according to the Merchant order number
**Description：**

- Query the withdrawal order according to the Merchant order number

**Request URL：**
- `/api/recharge/customer/withdrawal/order/query `

**Request method：**
- GET

**Parameters (body)：**

|parameter name|required|type|Description|
|:----    |:---|:----- |-----   |
|merchantNo |yes|string | UID  |
|merchantOrderNo |yes|string | merchant order no  |
|timestamp |yes|string | 10-bit timestamp  |

- Parameter encryption order： merchantNo&merchantOrderNo&timestamp

**Return parameter description**

```
{
    "code":200,
    "data":{
        "account":"345345245",  //Bank Account
        "accountName":"测试",   //Bank account name
        "amount":1000.0,    //fiat currency amount 
        "bankAddress":"",  //bank address
        "bankCode":"",   //bank code
        "bankName":"中国银行",  //bank name
        "bankNumber":"535224124242", //Bank card number
        "comeFrom":2, 
        "createTime":"2021-01-03 11:25:39", //sumbit time
        "currencyCount":null, //usdt count
        "currencyTypeId":1, //1:USDT,2:BTC,3:ETH
        "customerId":"110", //customerId
        "fee":null, //fee
        "fiatCurrency":"CNY", //fiatCurrency
        "financialReviewTime":null, //financialReviewTime
        "iBank":"344244", 
        "id":5, 
        "investorPassword":null,
        "merchantNo":null,
        "merchantOrderNo":"TEST1618221736", //Merchant order number
        "orderNo":"WF1609644339630",  //order no
        "refuseReason":null, //refuseReason
        "remarks":"", //remarks
        "state":0, //state： 0 Unreviewed  1 Reviewed succeed 2 succeed  -1 Reviewed failed  -2 failed 
        "subbranch":"北京西二旗分行", //subbranch
        "swiftCode":"", 
        "traderId":null, 
        "traderReviewTime":null, //done time
        "type":1, //Type 1 Normal 2 Urgent
        "userId":490,
        "withdrawType":2, //Withdrawal type 1 Fixed fiat currency  2 Fixed USDT
        "withdrawalRate":null //withdrawal Rate
    },
    "message":"success"
}


```
